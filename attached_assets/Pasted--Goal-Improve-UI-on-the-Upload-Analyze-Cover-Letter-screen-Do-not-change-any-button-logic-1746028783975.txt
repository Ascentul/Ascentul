// 🎯 Goal: Improve UI on the Upload & Analyze Cover Letter screen
// Do not change any button logic — just visual structure, layout, and labels.

// ✅ 1. Add section titles above Job Description and Cover Letter fields
document.querySelector('#jobDescription').insertAdjacentHTML('beforebegin', `
  <label style="font-weight: 600; margin-bottom: 6px; display: block;">Job Description:</label>
`);

document.querySelector('#coverLetterInput').insertAdjacentHTML('beforebegin', `
  <label style="font-weight: 600; margin-top: 24px; margin-bottom: 6px; display: block;">Your Cover Letter:</label>
`);

// ✅ 2. Add heading and subtle border under "Analysis Results"
const analysisHeader = document.querySelector('.analysis-header'); // adjust selector
analysisHeader.style.fontSize = '20px';
analysisHeader.style.fontWeight = '700';
analysisHeader.style.marginBottom = '12px';
analysisHeader.style.borderBottom = '1px solid #e0e0e0';
analysisHeader.textContent = '📊 AI Analysis Results';

// ✅ 3. Style score boxes (Overall, Alignment, etc.)
document.querySelectorAll('.score-box').forEach((el, i) => {
  el.style.padding = '12px';
  el.style.border = '1px solid #dcdcdc';
  el.style.borderRadius = '8px';
  el.style.backgroundColor = '#f9f9f9';
  el.style.textAlign = 'center';
  el.style.marginRight = '8px';
  el.style.minWidth = '60px';
  
  // Optional icon or label under score
  const labels = ['Overall', 'Alignment', 'Persuasive', 'Clarity'];
  const label = document.createElement('div');
  label.textContent = labels[i];
  label.style.fontSize = '12px';
  label.style.color = '#555';
  label.style.marginTop = '4px';
  el.appendChild(label);
});

// ✅ 4. Create collapsible sections for Strengths / Areas to Improve / Suggestions
function makeCollapsible(id, title) {
  const section = document.querySelector(`#${id}`);
  const header = document.createElement('button');
  header.textContent = title;
  header.style.fontWeight = '600';
  header.style.marginTop = '16px';
  header.style.background = 'none';
  header.style.border = 'none';
  header.style.cursor = 'pointer';
  header.style.padding = '0';
  header.style.fontSize = '16px';

  section.before(header);
  section.style.display = 'none';

  header.addEventListener('click', () => {
    section.style.display = section.style.display === 'none' ? 'block' : 'none';
  });
}

makeCollapsible('strengthsList', '✓ Strengths');
makeCollapsible('areasToImproveList', '⚠️ Areas to Improve');
makeCollapsible('suggestionsList', '💡 Suggestions');

// ✅ 5. Highlight Optimized Cover Letter section
const optimizedBox = document.querySelector('#optimizedCoverLetter');
optimizedBox.style.border = '1px solid #cce5ff';
optimizedBox.style.backgroundColor = '#eaf4ff';
optimizedBox.style.padding = '16px';
optimizedBox.style.borderRadius = '8px';
optimizedBox.style.marginTop = '24px';

// Add save/copy buttons
const controls = document.createElement('div');
controls.innerHTML = `
  <button style="margin-right: 10px;" onclick="copyOptimized()">📋 Copy</button>
  <button style="margin-right: 10px;" onclick="replaceOriginal()">🔁 Replace Original</button>
  <button onclick="saveAsNewVersion()">💾 Save as New</button>
`;
optimizedBox.before(controls);

// ✅ 6. Add loading state to Analyze button
const analyzeBtn = document.querySelector('#analyzeBtn');
analyzeBtn.addEventListener('click', () => {
  analyzeBtn.innerText = 'Analyzing...';
  analyzeBtn.disabled = true;

  setTimeout(() => {
    analyzeBtn.innerText = 'Analyze Cover Letter';
    analyzeBtn.disabled = false;
  }, 3000); // Replace with actual async logic in app
});

// ✅ 7. Add tooltip & color code to score boxes
document.querySelectorAll('.score-box').forEach(box => {
  const score = parseInt(box.textContent);
  if (score < 60) box.style.backgroundColor = '#ffe6e6';
  else if (score < 80) box.style.backgroundColor = '#fff6cc';
  else box.style.backgroundColor = '#e0ffe0';

  box.title = 'Score: ' + score + ' (hover for more info)';
});
